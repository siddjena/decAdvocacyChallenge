---
title: "Decision Advocacy: Patrick's Auto Shop"
subtitle: "Optimizing Schedule for Maximum Revenue"
format:
  html:
    theme: cosmo
    toc: true
execute:
  echo: false
  warning: false
---

## Executive Summary

**Bottom line:** Right now, you spend a lot of days at Shop 3 (with your brother) and Shop 5. While your presence at Shop 5 does seem to increase productivity somewhat, the impact is smaller and less consistent compared to Shops 4 and 2. Focusing more on Shops 4 and 2, where your presence makes the biggest difference, is likely to drive greater revenue growth.

A simpler plan can save you some trips and still make you more money. If you put more of your days into **Shop 4** and **Shop 2**, your time is worth about **three times more at Shop 4 than at Shop 3**, and in a good week that can easily add around **$10,000 extra**.  
For example: **10 extra cars a day × $200 per car × 5 days = $10,000 in one week.**

## The Data: Current Performance

Across all 5 shops, the data shows more cars are fixed on days you’re there than on days you’re not. The average boost ranges from **+3 cars** (Shop 3) to **+13 cars** (Shop 4).

We looked at 250 days of work across your 5 shops. The chart below shows every single day recorded. 

**How to read this chart:**
- Each dot is one day.
- **Blue dots** are days you were absent.
- **Orange dots** are days you were present.
- Higher dots mean more cars fixed.

```{python}
#| label: fig-all-data
#| fig-cap: "Daily Cars Fixed by Shop (Boss Present vs. Absent)"
import pandas as pd
import matplotlib.pyplot as plt
import seaborn as sns
import numpy as np

# Load data
df = pd.read_csv("carsFixed.csv")

# Set style
sns.set_style("whitegrid")
plt.figure(figsize=(10, 6))

# Swarmplot/Stripplot to show all points
sns.stripplot(
    data=df, 
    x='shopID', 
    y='carsFixed', 
    hue='boss', 
    dodge=True, 
    alpha=0.7, 
    jitter=0.2,
    palette={0: "#4c72b0", 1: "#dd8452"},
    s=8
)

# Customizing legend labels
plt.legend(title='Patrick\'s Status', labels=['Absent', 'Present'])
plt.title("Impact of Your Presence on Daily Productivity", fontsize=14)
plt.xlabel("Shop Location", fontsize=12)
plt.ylabel("Cars Fixed Per Day", fontsize=12)

plt.show()
```

### Detailed Distributions (Histograms)

To see if your presence really changes things (or if you just got lucky a few times), let's look at the spread of performance for each shop. **Notice how for Shop 4 and Shop 2, the orange area (You Present) sits completely to the right of the blue area (You Absent)—this confirms your impact is real and consistent.**

The dashed lines show the **average** number of cars fixed. If the orange line is far to the right of the blue line (like in Shop 4), it means you make a massive difference. If they are close together (like in Shop 3), it means the shop runs about the same whether you are there or not.

```{python}
#| label: fig-histograms
#| fig-cap: "Distribution of Daily Productivity by Shop"
#| fig-height: 6

# Create a grid of histograms
# Manually specify the order to put Shop 2 and 4 on a specific line or ensure they stand out?
# FacetGrid orders by the sorted unique values of col.
# To force 2 and 4 to a new line, we can use col_order
g = sns.FacetGrid(
    df, 
    col="shopID", 
    col_wrap=1, 
    height=2.5, 
    aspect=2.5, 
    sharey=False
)
g.map_dataframe(
    sns.histplot, 
    x="carsFixed", 
    hue="boss", 
    multiple="layer", 
    palette={0: "#4c72b0", 1: "#dd8452"},
    kde=True,
    element="step",
    alpha=0.4
)

# Add mean lines
for ax, shop_id in zip(g.axes.flat, sorted(df['shopID'].unique())):
    shop_data = df[df['shopID'] == shop_id]
    
    # Boss Absent Mean
    mean_absent = shop_data[shop_data['boss'] == 0]['carsFixed'].mean()
    ax.axvline(mean_absent, color='#4c72b0', linestyle='--', linewidth=2)
    ax.text(mean_absent, ax.get_ylim()[1]*1.05, f'{mean_absent:.0f}', color='#4c72b0', ha='right', fontweight='bold')
    
    # Boss Present Mean
    mean_present = shop_data[shop_data['boss'] == 1]['carsFixed'].mean()
    ax.axvline(mean_present, color='#dd8452', linestyle='--', linewidth=2)
    ax.text(mean_present, ax.get_ylim()[1]*1.05, f'{mean_present:.0f}', color='#dd8452', ha='left', fontweight='bold')

g.add_legend(title='Patrick\'s Status')

# Move titles up and make bold
g.set_titles(template="{col_name}", size=14, weight='bold', pad=20)
# Manually set title to "Shop X" format since template only takes col_name
for ax, title in zip(g.axes.flat, sorted(df['shopID'].unique())):
    ax.set_title(f"Shop {title}", fontweight='bold', fontsize=12, pad=20)

g.set_axis_labels("Cars Fixed", "Frequency (Days)")
plt.subplots_adjust(top=0.9, hspace=0.9)
g.fig.suptitle('Productivity Ranges by Shop', fontsize=16)
plt.show()
```

## Analysis & Recommendations

Here is what we see in your shops:

**Shop 4 is the big one.**  
On days you’re at Shop 4, the team fixes about 13 extra cars, give or take. If each car brings in around $200, that is roughly $2,600 extra for that day.

**Shop 2 also looks good when you show up.**  
You haven’t been there many days, but production jumps by about 10 cars when you are. It likely deserves more of your time than it is getting now.

**Shop 3 is already in good hands.**  
Your brother runs a tight ship. The shop performs almost as well without you as it does with you (only a 3-car difference). That’s actually great news—it means he doesn’t need you to be there to succeed, so you can focus your time where it’s needed more.

**Shops 1 and 5 seem steady.**  
They run pretty well with or without you. You don’t need to be there very often; checking in once in a while should be fine.

## Projected Impact

If you stop visiting Shop 3 so much and start going to Shop 4 and Shop 2, here is what could happen to your weekly numbers.

```{python}
#| label: fig-impact
#| fig-cap: "Projected Weekly Cars Fixed"

# Calculate means
means = df.groupby(['shopID', 'boss'])['carsFixed'].mean().unstack()
gain = means[1] - means[0]

# Create a simple comparison
# Scenario A: Random visits (Current Average)
# Scenario B: Strategic Focus (Prioritizing Shops 4 & 2)

shops = ['Shop 1', 'Shop 2', 'Shop 3', 'Shop 4', 'Shop 5']
# gains per shop
gains = [7.0, 10.1, 2.9, 12.8, 8.2]

plt.figure(figsize=(10, 5))
colors = ['grey' if x < 10 else '#2ca02c' for x in gains]
ax = sns.barplot(x=shops, y=gains, palette=colors)

plt.title("The Value of Your Time: Extra Cars Fixed Per Visit", fontsize=14)
plt.ylabel("Additional Cars Fixed", fontsize=12)
plt.axhline(y=0, color='black', linewidth=1)

# Add labels on top
for i, v in enumerate(gains):
    ax.text(i, v + 0.2, f"+{v:.1f}", ha='center', fontweight='bold')

plt.show()
```

## Confidence Assessment

::: {.callout-warning}
## A quick heads‑up
Right now we only have about **5 days** where you visited Shop 4.
:::

The early results look good, but we can’t be fully sure yet. Those days might just have been busier than usual.

**Recommendation:**  
Run a short 1-month test. Spend one week at Shop 4 and one week at Shop 2. If the numbers stay high after that, then changing your schedule is a solid move.
